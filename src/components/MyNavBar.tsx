import Container from "react-bootstrap/Container";
import Nav from "react-bootstrap/Nav";
import Navbar from "react-bootstrap/Navbar";
import { Image } from "react-bootstrap";
import { useAuth } from "../contexts/AuthContext";
import { LinkContainer } from 'react-router-bootstrap';
import { auth } from '../services/firebaseConfig';

const MyNavBar = () => {
    const { user, loading } = useAuth();

    const handleLogout = () => {
        auth.signOut();
    };

    return (
        <Navbar data-bs-theme="light" className="border-bottom px-3 py-3">
            <Container fluid>
                <Navbar.Brand href="/">
                    <Image src="src/assets/images/logo.png" width={64} />
                </Navbar.Brand>
                <Nav className="mx-auto fw-bold">
                    <Nav.Link href="/">HOME</Nav.Link>
                    <Nav.Link href="/about">ABOUT US</Nav.Link>
                </Nav>
                <Nav>
                    {loading ? (
                        <Nav.Link className="px-4 border-start">Carregando...</Nav.Link>
                    ) : user ? (
                        <>
                            <LinkContainer to="/profile">
                                <Nav.Link className="px-4 border-start">
                                    Ol√°, {user.email}
                                </Nav.Link>
                            </LinkContainer>
                            <Nav.Link onClick={handleLogout} className="px-4 border-start">
                                Logout
                            </Nav.Link>
                        </>
                    ) : (
                        <LinkContainer to="/login">
                            <Nav.Link className="px-4 border-start">
                                <svg
                                    xmlns="http://www.w3.org/2000/svg"
                                    width="24"
                                    height="24"
                                    fill="currentColor"
                                    className="bi bi-person-circle"
                                    viewBox="0 0 16 16"
                                >
                                    <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0" />
                                    <path
                                        fillRule="evenodd"
                                        d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8m8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1"
                                    />
                                </svg>
                            </Nav.Link>
                        </LinkContainer>
                    )}
                    <Nav.Link href="/cart" className="ps-4 border-start">
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            width="24"
                            height="24"
                            fill="currentColor"
                            className="bi bi-cart2"
                            viewBox="0 0 16 16"
                        >
                            <path d="M0 2.5A.5.5 0 0 1 .5 2H2a.5.5 0 0 1 .485.379L2.89 4H14.5a.5.5 0 0 1 .485.621l-1.5 6A.5.5 0 0 1 13 11H4a.5.5 0 0 1-.485-.379L1.61 3H.5a.5.5 0 0 1-.5-.5M3.14 5l1.25 5h8.22l1.25-5zM5 13a1 1 0 1 0 0 2 1 1 0 0 0 0-2m-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0m9-1a1 1 0 1 0 0 2 1 1 0 0 0 0-2m-2 1a2 2 0 1 1-4 0 2 2 0 0 1 4 0"
                        />
                    </svg>
                </Nav.Link>
            </Nav>
        </Container>
    </Navbar>
);
};

export default MyNavBar;
